# 🚀 JERCAT Token - Complete Deployment Guide

## 📋 Table of Contents
1. [Smart Contracts Overview](#smart-contracts-overview)
2. [Prerequisites](#prerequisites)
3. [Installation](#installation)
4. [Deployment Steps](#deployment-steps)
5. [Verification](#verification)
6. [Integration with DEX](#integration-with-dex)
7. [Testing](#testing)
8. [Security Checklist](#security-checklist)

---

## 📜 Smart Contracts Overview

### **1. JercatToken.sol**
Main ERC-20 token with advanced features:
- ✅ **100M Max Supply** (50M initial mint)
- ✅ **Tier System** (Bronze, Silver, Gold, Diamond)
- ✅ **Staking Rewards** (30% APY)
- ✅ **Gas Payment** (Pay gas with JERCAT)
- ✅ **Fee Discounts** (10% to 100% off)
- ✅ **Deflationary** (Burn mechanism)
- ✅ **ERC-20 Permit** (Gasless approvals)

### **2. JercatDEXRouter.sol**
DEX router with 0.001% platform fee:
- ✅ **Multi-DEX Support** (Uniswap, Sushiswap, etc.)
- ✅ **JERCAT Discounts** (Based on user tier)
- ✅ **Fee Collection** (Automatic to recipient)
- ✅ **Slippage Protection**

### **3. JercatTokenSale.sol**
Public sale contract:
- ✅ **Buy with ETH**
- ✅ **Price Configurable**
- ✅ **Min/Max Purchase Limits**
- ✅ **Time-Limited Sales**

---

## 🛠️ Prerequisites

### Software Required
```bash
# Node.js 18+
node --version

# Hardhat
npm install --save-dev hardhat

# OpenZeppelin Contracts
npm install @openzeppelin/contracts

# Hardhat Plugins
npm install --save-dev @nomicfoundation/hardhat-toolbox
npm install --save-dev @nomicfoundation/hardhat-verify
```

### Environment Setup
Create `.env` file:
```bash
# Network RPC URLs
MAINNET_RPC_URL=https://eth.llamarpc.com
GOERLI_RPC_URL=https://goerli.infura.io/v3/YOUR_KEY
BSC_RPC_URL=https://bsc-dataseed.binance.org
POLYGON_RPC_URL=https://polygon-rpc.com

# Private Keys
DEPLOYER_PRIVATE_KEY=your_private_key_here

# Etherscan API Keys (for verification)
ETHERSCAN_API_KEY=your_etherscan_api_key
BSCSCAN_API_KEY=your_bscscan_api_key
POLYGONSCAN_API_KEY=your_polygonscan_api_key

# Contract Addresses (will be filled after deployment)
JERCAT_TOKEN_ADDRESS=
JERCAT_DEX_ROUTER_ADDRESS=
JERCAT_SALE_ADDRESS=

# Fee Recipient
FEE_RECIPIENT_ADDRESS=your_metamask_address
```

---

## 📦 Installation

### Step 1: Create Hardhat Project
```bash
mkdir jercat-contracts
cd jercat-contracts
npm init -y
npm install --save-dev hardhat
npx hardhat init
```

### Step 2: Install Dependencies
```bash
npm install @openzeppelin/contracts
npm install --save-dev @nomicfoundation/hardhat-toolbox
npm install --save-dev @nomicfoundation/hardhat-verify
npm install dotenv
```

### Step 3: Configure Hardhat
Create `hardhat.config.js`:
```javascript
require("@nomicfoundation/hardhat-toolbox");
require("@nomicfoundation/hardhat-verify");
require("dotenv").config();

module.exports = {
  solidity: {
    version: "0.8.20",
    settings: {
      optimizer: {
        enabled: true,
        runs: 200
      }
    }
  },
  networks: {
    // Ethereum Mainnet
    mainnet: {
      url: process.env.MAINNET_RPC_URL,
      accounts: [process.env.DEPLOYER_PRIVATE_KEY],
      chainId: 1
    },
    // Goerli Testnet
    goerli: {
      url: process.env.GOERLI_RPC_URL,
      accounts: [process.env.DEPLOYER_PRIVATE_KEY],
      chainId: 5
    },
    // BSC Mainnet
    bsc: {
      url: process.env.BSC_RPC_URL,
      accounts: [process.env.DEPLOYER_PRIVATE_KEY],
      chainId: 56
    },
    // Polygon Mainnet
    polygon: {
      url: process.env.POLYGON_RPC_URL,
      accounts: [process.env.DEPLOYER_PRIVATE_KEY],
      chainId: 137
    }
  },
  etherscan: {
    apiKey: {
      mainnet: process.env.ETHERSCAN_API_KEY,
      goerli: process.env.ETHERSCAN_API_KEY,
      bsc: process.env.BSCSCAN_API_KEY,
      polygon: process.env.POLYGONSCAN_API_KEY
    }
  }
};
```

---

## 🚀 Deployment Steps

### Step 1: Deploy on Testnet First

Create `scripts/deploy.js`:
```javascript
const hre = require("hardhat");
const { ethers } = require("hardhat");

async function main() {
  console.log("🚀 Starting JERCAT deployment...\n");

  // Get deployer account
  const [deployer] = await ethers.getSigners();
  console.log("Deploying contracts with account:", deployer.address);
  console.log("Account balance:", ethers.formatEther(await ethers.provider.getBalance(deployer.address)), "ETH\n");

  // 1. Deploy JERCAT Token
  console.log("📝 Deploying JercatToken...");
  const JercatToken = await ethers.getContractFactory("JercatToken");
  const jercatToken = await JercatToken.deploy();
  await jercatToken.waitForDeployment();
  const tokenAddress = await jercatToken.getAddress();
  console.log("✅ JercatToken deployed to:", tokenAddress);

  // 2. Deploy DEX Router
  console.log("\n📝 Deploying JercatDEXRouter...");
  const feeRecipient = process.env.FEE_RECIPIENT_ADDRESS || deployer.address;
  const JercatDEXRouter = await ethers.getContractFactory("JercatDEXRouter");
  const dexRouter = await JercatDEXRouter.deploy(tokenAddress, feeRecipient);
  await dexRouter.waitForDeployment();
  const routerAddress = await dexRouter.getAddress();
  console.log("✅ JercatDEXRouter deployed to:", routerAddress);

  // 3. Deploy Token Sale
  console.log("\n📝 Deploying JercatTokenSale...");
  const tokenPrice = ethers.parseEther("0.00005"); // 0.00005 ETH per JERCAT ($0.15 if ETH = $3000)
  const saleEndTime = Math.floor(Date.now() / 1000) + (30 * 24 * 60 * 60); // 30 days from now
  
  const JercatTokenSale = await ethers.getContractFactory("JercatTokenSale");
  const tokenSale = await JercatTokenSale.deploy(tokenAddress, tokenPrice, saleEndTime);
  await tokenSale.waitForDeployment();
  const saleAddress = await tokenSale.getAddress();
  console.log("✅ JercatTokenSale deployed to:", saleAddress);

  // 4. Transfer tokens to sale contract
  console.log("\n📝 Transferring tokens to sale contract...");
  const saleAllocation = ethers.parseEther("10000000"); // 10M tokens for sale
  await jercatToken.transfer(saleAddress, saleAllocation);
  console.log("✅ Transferred", ethers.formatEther(saleAllocation), "JERCAT to sale contract");

  // 5. Setup DEX Router - Add Uniswap V3 Router
  console.log("\n📝 Setting up DEX Router...");
  const UNISWAP_V3_ROUTER = "0xE592427A0AEce92De3Edee1F18E0157C05861564"; // Ethereum Mainnet
  await dexRouter.addRouter(UNISWAP_V3_ROUTER);
  console.log("✅ Added Uniswap V3 Router:", UNISWAP_V3_ROUTER);

  // Summary
  console.log("\n" + "=".repeat(60));
  console.log("🎉 DEPLOYMENT COMPLETE!");
  console.log("=".repeat(60));
  console.log("\n📋 Contract Addresses:");
  console.log("JERCAT Token:      ", tokenAddress);
  console.log("DEX Router:        ", routerAddress);
  console.log("Token Sale:        ", saleAddress);
  console.log("Fee Recipient:     ", feeRecipient);
  console.log("\n💰 Token Distribution:");
  console.log("Total Supply:       50,000,000 JERCAT");
  console.log("Sale Allocation:    10,000,000 JERCAT");
  console.log("Team/Treasury:      40,000,000 JERCAT");
  console.log("\n⏰ Sale Info:");
  console.log("Token Price:       ", ethers.formatEther(tokenPrice), "ETH");
  console.log("Sale Ends:         ", new Date(saleEndTime * 1000).toLocaleString());
  console.log("\n🔗 Next Steps:");
  console.log("1. Verify contracts on Etherscan");
  console.log("2. Add liquidity on Uniswap");
  console.log("3. Update frontend with contract addresses");
  console.log("4. Start marketing campaign");
  console.log("=".repeat(60) + "\n");

  // Save addresses to file
  const fs = require('fs');
  const addresses = {
    network: hre.network.name,
    jercatToken: tokenAddress,
    dexRouter: routerAddress,
    tokenSale: saleAddress,
    feeRecipient: feeRecipient,
    deployedAt: new Date().toISOString()
  };
  fs.writeFileSync(
    `deployments/${hre.network.name}.json`,
    JSON.stringify(addresses, null, 2)
  );
  console.log(`📁 Addresses saved to deployments/${hre.network.name}.json`);
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
```

### Step 2: Deploy to Testnet
```bash
# Create deployments directory
mkdir deployments

# Deploy to Goerli
npx hardhat run scripts/deploy.js --network goerli

# Save the output addresses!
```

### Step 3: Verify Contracts
```bash
# Verify JERCAT Token
npx hardhat verify --network goerli JERCAT_TOKEN_ADDRESS

# Verify DEX Router
npx hardhat verify --network goerli DEX_ROUTER_ADDRESS "JERCAT_TOKEN_ADDRESS" "FEE_RECIPIENT_ADDRESS"

# Verify Token Sale
npx hardhat verify --network goerli SALE_ADDRESS "JERCAT_TOKEN_ADDRESS" "TOKEN_PRICE" "SALE_END_TIME"
```

---

## ✅ Verification on Etherscan

### Automatic Verification
```bash
npx hardhat verify --network mainnet JERCAT_TOKEN_ADDRESS
```

### Manual Verification
1. Go to Etherscan.io
2. Find your contract
3. Click "Verify and Publish"
4. Select "Solidity (Single file)"
5. Paste flattened source code
6. Enter constructor arguments

### Flatten Contract
```bash
npx hardhat flatten contracts/JercatToken.sol > JercatToken_flat.sol
```

---

## 🔗 Integration with DEX

### Step 1: Add Liquidity on Uniswap
```javascript
// Add liquidity script
async function addLiquidity() {
  const WETH = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2";
  const JERCAT = "YOUR_JERCAT_ADDRESS";
  
  const uniswapFactory = "0x1F98431c8aD98523631AE4a59f267346ea31F984";
  const positionManager = "0xC36442b4a4522E871399CD717aBDD847Ab11FE88";
  
  // Create pool
  // Initial price: 1 ETH = 20,000 JERCAT
  // Provide 10 ETH + 200,000 JERCAT
}
```

### Step 2: Add to CoinGecko/CoinMarketCap
Submit your token:
- **CoinGecko**: https://www.coingecko.com/en/coins/new
- **CoinMarketCap**: https://coinmarketcap.com/request/

Required info:
- Contract address
- Token symbol: JERCAT
- Decimals: 18
- Total supply: 100M
- Logo (512x512px)
- Website URL
- Social media links

---

## 🧪 Testing

Create `test/JercatToken.test.js`:
```javascript
const { expect } = require("chai");
const { ethers } = require("hardhat");

describe("JercatToken", function () {
  let jercatToken;
  let owner, addr1, addr2;

  beforeEach(async function () {
    [owner, addr1, addr2] = await ethers.getSigners();
    
    const JercatToken = await ethers.getContractFactory("JercatToken");
    jercatToken = await JercatToken.deploy();
    await jercatToken.waitForDeployment();
  });

  describe("Deployment", function () {
    it("Should set the right owner", async function () {
      expect(await jercatToken.owner()).to.equal(owner.address);
    });

    it("Should assign the initial supply to the owner", async function () {
      const ownerBalance = await jercatToken.balanceOf(owner.address);
      expect(await jercatToken.totalSupply()).to.equal(ownerBalance);
    });
  });

  describe("Tier System", function () {
    it("Should give correct tier for Bronze", async function () {
      const bronzeAmount = ethers.parseEther("100");
      await jercatToken.transfer(addr1.address, bronzeAmount);
      
      const [tier, discount] = await jercatToken.getUserTier(addr1.address);
      expect(tier).to.equal("BRONZE");
      expect(discount).to.equal(1000); // 10%
    });

    it("Should give correct tier for Diamond", async function () {
      const diamondAmount = ethers.parseEther("10000");
      await jercatToken.transfer(addr1.address, diamondAmount);
      
      const [tier, discount] = await jercatToken.getUserTier(addr1.address);
      expect(tier).to.equal("DIAMOND");
      expect(discount).to.equal(10000); // 100%
    });
  });

  describe("Staking", function () {
    it("Should allow staking", async function () {
      const stakeAmount = ethers.parseEther("1000");
      await jercatToken.transfer(addr1.address, stakeAmount);
      
      await jercatToken.connect(addr1).stake(stakeAmount);
      
      expect(await jercatToken.stakedBalance(addr1.address)).to.equal(stakeAmount);
      expect(await jercatToken.totalStaked()).to.equal(stakeAmount);
    });

    it("Should calculate rewards correctly", async function () {
      const stakeAmount = ethers.parseEther("1000");
      await jercatToken.transfer(addr1.address, stakeAmount);
      await jercatToken.connect(addr1).stake(stakeAmount);
      
      // Fast forward 1 year
      await ethers.provider.send("evm_increaseTime", [365 * 24 * 60 * 60]);
      await ethers.provider.send("evm_mine");
      
      const pending = await jercatToken.calculatePendingRewards(addr1.address);
      
      // Should be approximately 30% of staked amount (30% APY)
      const expected = stakeAmount * BigInt(30) / BigInt(100);
      expect(pending).to.be.closeTo(expected, ethers.parseEther("10"));
    });
  });
});
```

Run tests:
```bash
npx hardhat test
```

---

## 🛡️ Security Checklist

### Before Mainnet Deployment

- [ ] **Audit by Professional Firm** (CertiK, OpenZeppelin, Trail of Bits)
- [ ] **All tests passing** (100% coverage)
- [ ] **Testnet deployment successful**
- [ ] **Multi-sig wallet setup** for owner functions
- [ ] **Emergency pause tested**
- [ ] **Gas optimization verified**
- [ ] **Slither static analysis** run
- [ ] **No hardcoded addresses**
- [ ] **ReentrancyGuard on all external functions**
- [ ] **Access control properly configured**
- [ ] **Events emitted for all state changes**

### Slither Analysis
```bash
# Install Slither
pip3 install slither-analyzer

# Run analysis
slither contracts/JercatToken.sol
```

### Common Vulnerabilities Checked
✅ Reentrancy attacks
✅ Integer overflow/underflow
✅ Front-running
✅ Access control
✅ Gas limit issues
✅ Denial of service
✅ Logic errors

---

## 📊 Post-Deployment

### 1. Add to MetaMask
Users can add JERCAT to MetaMask:
```javascript
await ethereum.request({
  method: 'wallet_watchAsset',
  params: {
    type: 'ERC20',
    options: {
      address: 'JERCAT_TOKEN_ADDRESS',
      symbol: 'JERCAT',
      decimals: 18,
      image: 'https://your-domain.com/jercat-logo.png'
    }
  }
});
```

### 2. Create Liquidity Pool
Provide initial liquidity on Uniswap V3:
- 10 ETH + 200,000 JERCAT
- Fee tier: 0.3%
- Price range: Strategic

### 3. Marketing Campaign
- Announce on Twitter/X
- Post on Reddit (r/CryptoMoonShots)
- Submit to CoinGecko
- Submit to CoinMarketCap
- Create Telegram/Discord community

### 4. Monitoring
Setup alerts for:
- Large transactions
- Unusual trading activity
- Contract interactions
- Gas price spikes

---

## 💰 Cost Estimates

### Deployment Costs (Ethereum Mainnet)
- **JercatToken**: ~$150-300 (depending on gas)
- **DEX Router**: ~$100-200
- **Token Sale**: ~$80-150
- **Total**: ~$330-650

### Cheaper Alternatives
- **Polygon**: ~$0.50 total
- **BSC**: ~$5 total
- **Arbitrum**: ~$10 total

---

## 🎯 Next Steps After Deployment

1. ✅ Verify all contracts on Etherscan
2. ✅ Add liquidity on Uniswap/PancakeSwap
3. ✅ Submit to token listing sites
4. ✅ Update frontend with addresses
5. ✅ Launch marketing campaign
6. ✅ Setup monitoring & alerts
7. ✅ Prepare for CEX listings (Binance, Coinbase)

---

## 📞 Support & Resources

- **Hardhat Docs**: https://hardhat.org/docs
- **OpenZeppelin**: https://docs.openzeppelin.com
- **Etherscan**: https://etherscan.io
- **Uniswap Docs**: https://docs.uniswap.org

---

## ⚠️ Disclaimer

This guide is for educational purposes. Always:
- Audit your contracts professionally
- Test extensively on testnets
- Use multi-sig wallets for admin functions
- Follow legal compliance in your jurisdiction
- Never expose private keys

---

**Made with 💜 by the JERCAT Team**
